{% extends "base.html" %}


{% block script %}
<script>
$(document).ready(function(){
	console.log("working");


	$.ajax({
		url: "/api/tweet/",
		method: "GET",
		success: function(data){
			// console.log(data)
			$.each(data, function(key, value){
				var tweetKey = key
				var tweetContent = value.content
				var tweetUser = value.user
				$("tweet-container").append(
						"<li>" + tweetContent + "<br/>" + tweetUser.username + " | " + "<a href='#'>" + "</li>"
					)

			})
		},
		error: function(data){
			console.log("error")
			console.log(data)
		},

	})


});
</script>
{% endblock script %}


{% block content %}
<div id="tweet-container">
	</div>

<h1> 트윗 목록 </h1>
<div class="row">
	<div class="col-sm-3 col-xs-12" style="background-color: green;">
		<h1>{{ request.user }}</h1>
	</div>
	<div class="col-sm-9">
		{% if not request.GET.q %}
			<div class="">
		{% include "tweets/form.html" with form=create_form action_url=create_url btn_title='Tweet' %}				
			</div>
		{% endif %}
		<hr/> 
		{% for object in object_list %}
	<div class="media">
		<div class="media-left">
			<a href="#">
				{% if object.image %}
				<img class="media-object" src="..." alt="...">
				{% endif %}
			</a>
		</div>
		<div class="media-body">
			{{ object.content }}<br/>
			{{ object.user }} | {{ object.timestamp|timesince }} 전 | <a href="{{ object.get_absolute_url }}">View</a>
		</div>
	</div>
	<hr/>
{% empty %}
	{% if request.GET.q %}
		<p>No tweets found.</p>
	{% else %}
		<p>No tweets yet</p>
	{% endif %}
{% endfor %}
</div>
</div>

{% endblock content %}
